(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GXrT:function(e,n,o){"use strict";o.r(n),o.d(n,"Tab4PageModule",function(){return U});var i=o("ofXK"),t=o("3Pt+"),s=o("TEn/"),r=o("tyNb"),c=o("mrSG"),a=o("W3Zi"),l=o("IeiB"),b=o("fXoL"),d=o("lGQG"),u=o("IfdK"),g=o("yHma"),h=o("92l+"),p=o("Bfh1"),m=o("WOgW");function M(e,n){1&e&&(b.Mb(0,"section",6),b.Kb(1,"ion-spinner",7),b.Lb())}function C(e,n){if(1&e){const e=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-grid",8),b.Mb(2,"ion-row",9),b.Mb(3,"ion-col",10),b.Mb(4,"ion-icon",11),b.Ub("click",function(){return b.ec(e),b.Wb().presentAlertLocationConfirm()}),b.Lb(),b.Mb(5,"ion-icon",12),b.Ub("click",function(){return b.ec(e),b.Wb().presentAlertConfirm()}),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}}function f(e,n){if(1&e){const e=b.Nb();b.Mb(0,"section",13),b.Ub("click",function(){return b.ec(e),b.Wb().openLoginComponent()}),b.Mb(1,"ion-col",14),b.Kb(2,"img",15),b.Lb(),b.Mb(3,"p",16),b.ic(4," Inicia sesi\xf3n o registrate para ver tu perfil y hacer pedidos"),b.Lb(),b.Lb()}}function L(e,n){if(1&e){const e=b.Nb();b.Mb(0,"ion-row",25),b.Mb(1,"ion-col",26),b.Kb(2,"ion-icon",27),b.Mb(3,"ion-label",28),b.ic(4,"Nombre (s)"),b.Lb(),b.Mb(5,"ion-input",29),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.Name=n}),b.Lb(),b.Lb(),b.Mb(6,"ion-col",26),b.Kb(7,"ion-icon",30),b.Mb(8,"ion-label",28),b.ic(9,"Email"),b.Lb(),b.Mb(10,"ion-input",31),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.Email=n}),b.Lb(),b.Lb(),b.Mb(11,"ion-col",32),b.Kb(12,"ion-icon",33),b.Mb(13,"ion-label",28),b.ic(14,"Contrase\xf1a"),b.Lb(),b.Mb(15,"ion-input",34),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.Password=n}),b.Lb(),b.Lb(),b.Mb(16,"ion-col",32),b.Kb(17,"ion-icon",35),b.Mb(18,"ion-label",28),b.ic(19,"Celular"),b.Lb(),b.Mb(20,"ion-input",36),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.Phone=n}),b.Lb(),b.Lb(),b.Lb()}if(2&e){const e=b.Wb(2);b.zb(5),b.cc("ngModel",e.user.Name),b.zb(5),b.cc("ngModel",e.user.Email),b.zb(5),b.cc("ngModel",e.user.Password),b.zb(5),b.cc("ngModel",e.user.Phone)}}function P(e,n){if(1&e){const e=b.Nb();b.Mb(0,"ion-row",25),b.Mb(1,"ion-col",26),b.Kb(2,"ion-icon",37),b.Mb(3,"ion-label",28),b.ic(4,"Direcci\xf3n"),b.Lb(),b.Mb(5,"ion-input",38),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.Address=n}),b.Lb(),b.Lb(),b.Mb(6,"ion-col",32),b.Mb(7,"ion-label",28),b.ic(8,"Colonia"),b.Lb(),b.Mb(9,"ion-input",39),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.AddressColone=n}),b.Lb(),b.Lb(),b.Mb(10,"ion-col",32),b.Mb(11,"ion-label",28),b.ic(12,"Codigo postal"),b.Lb(),b.Mb(13,"ion-input",40),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.AddressZipCode=n}),b.Lb(),b.Lb(),b.Mb(14,"ion-col",32),b.Mb(15,"ion-label",28),b.ic(16,"Estado"),b.Lb(),b.Mb(17,"ion-input",41),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.AddressState=n}),b.Lb(),b.Lb(),b.Mb(18,"ion-col",32),b.Mb(19,"ion-label",28),b.ic(20,"Ciudad"),b.Lb(),b.Mb(21,"ion-input",42),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.AddressCity=n}),b.Lb(),b.Lb(),b.Lb()}if(2&e){const e=b.Wb(2);b.zb(5),b.cc("ngModel",e.user.Address),b.zb(4),b.cc("ngModel",e.user.AddressColone),b.zb(4),b.cc("ngModel",e.user.AddressZipCode),b.zb(4),b.cc("ngModel",e.user.AddressState),b.zb(4),b.cc("ngModel",e.user.AddressCity)}}function v(e,n){if(1&e){const e=b.Nb();b.Mb(0,"ion-row",25),b.Mb(1,"ion-col",26),b.Kb(2,"ion-icon",43),b.Mb(3,"ion-label",28),b.ic(4,"Tarjeta"),b.Lb(),b.Mb(5,"ion-input",44),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.CardNumber=n}),b.Lb(),b.Lb(),b.Mb(6,"ion-col",32),b.Mb(7,"ion-label",28),b.ic(8,"Mes"),b.Lb(),b.Mb(9,"ion-input",45),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.CardMonth=n}),b.Lb(),b.Lb(),b.Mb(10,"ion-col",32),b.Mb(11,"ion-label",28),b.ic(12,"A\xf1o"),b.Lb(),b.Mb(13,"ion-input",46),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.CardYear=n}),b.Lb(),b.Lb(),b.Mb(14,"ion-col",26),b.Mb(15,"ion-label",28),b.ic(16,"Nombre"),b.Lb(),b.Mb(17,"ion-input",47),b.Ub("ngModelChange",function(n){return b.ec(e),b.Wb(2).user.CardName=n}),b.Lb(),b.Lb(),b.Lb()}if(2&e){const e=b.Wb(2);b.zb(5),b.cc("ngModel",e.user.CardNumber),b.zb(4),b.cc("ngModel",e.user.CardMonth),b.zb(4),b.cc("ngModel",e.user.CardYear),b.zb(4),b.cc("ngModel",e.user.CardName)}}function y(e,n){if(1&e){const e=b.Nb();b.Mb(0,"section",17),b.Mb(1,"ion-col",18),b.Kb(2,"img",19),b.Lb(),b.Mb(3,"ion-row",20),b.Mb(4,"ion-segment",21),b.Ub("ionChange",function(n){return b.ec(e),b.Wb().userSegmentChanged(n)})("ngModelChange",function(n){return b.ec(e),b.Wb().segmentValue=n}),b.Mb(5,"ion-segment-button",22),b.Mb(6,"ion-label"),b.ic(7,"Perfil"),b.Lb(),b.Lb(),b.Mb(8,"ion-segment-button",23),b.Mb(9,"ion-label"),b.ic(10,"Direcci\xf3n"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.hc(11,L,21,4,"ion-row",24),b.hc(12,P,22,5,"ion-row",24),b.hc(13,v,18,4,"ion-row",24),b.Lb()}if(2&e){const e=b.Wb();b.zb(4),b.cc("ngModel",e.segmentValue),b.zb(7),b.cc("ngIf","profile"==e.segmentValue),b.zb(1),b.cc("ngIf","address"==e.segmentValue),b.zb(1),b.cc("ngIf","cards"==e.segmentValue)}}function x(e,n){if(1&e){const e=b.Nb();b.Mb(0,"section",48),b.Mb(1,"ion-button",49),b.Ub("click",function(){return b.ec(e),b.Wb().updateUser()}),b.ic(2,"Guardar"),b.Lb(),b.Lb()}if(2&e){const e=b.Wb();b.zb(1),b.cc("disabled",1==e.serverProcess)}}const A=[{path:"",component:(()=>{class e{constructor(e,n,o,i,t,s,r,c,a,b){this.navController=e,this.authService=n,this.modalCtrl=o,this.sessionService=i,this.alertController=t,this.router=s,this.location=r,this.locationAccuracy=c,this.geolocation=a,this.androidPermissions=b,this.user=new l.c,this.serverProcess=!1,this.segmentValue="profile",this.currentUserLocationIntents=0}ionViewWillEnter(){console.log("ionViewWillEnter"),this.validateUserSession()}validateUserSession(){this.serverProcess=!0,setTimeout(()=>{this.user=this.sessionService.getLocalUser(),this.serverProcess=!1,this.user||this.openLoginComponent()},500)}updateUser(){this.user.Name&&this.user.Phone&&this.user.Email&&this.user.Password?(this.serverProcess=!0,this.sessionService.postUser(this.user,"update").subscribe(e=>{console.log(e),setTimeout(()=>{this.serverProcess=!1,this.presentAlert(e.statusName,e.statusDescription)},1500)})):this.presentAlert("Error","Es necesario completar la informaci\xf3n para continuar")}userSegmentChanged(e){console.log(e.detail.value),this.segmentValue=e.detail.value}openLoginComponent(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:a.a,id:"LoginComponent"});e.onDidDismiss().then(e=>{console.log(e),"refresh"==e.data&&this.validateUserSession()}),e.present(),yield e.onWillDismiss()})}presentAlert(e,n){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.alertController.create({header:e,message:n,buttons:["OK"]});yield o.present();const{role:i}=yield o.onDidDismiss();console.log("onDidDismiss resolved with role",i)})}presentAlertConfirm(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Salir",message:"\xbfSeguro que desea cerrar su sesion?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Salir",handler:()=>{this.serverProcess=!0,setTimeout(()=>{this.authService.setAuth(!1),this.sessionService.closeLocalUser(),this.router.navigateByUrl("/start")},500)}}]});yield e.present()})}presentAlertLocationConfirm(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Activar GPS",message:"\xbfActiva tu GPS para ver todos los producto y obtener envio gratis?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Si",handler:()=>{this.serverProcess=!0,setTimeout(()=>{this.checkPermission()},500)}}]});yield e.present()})}checkPermission(){if(this.currentUserLocationIntents=this.currentUserLocationIntents+1,console.log(this.currentUserLocationIntents),this.currentUserLocationIntents%2==0)return this.presentAlert("Modo de prueba","Ubicac\xedon de prueba: Cd. Delicias"),this.location.setCurrentUserLocation("Delicias"),void(this.serverProcess=!1);this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(e=>{e.hasPermission?this.enableGPS():this.locationAccPermission()},e=>{this.presentAlert("checkPermission Error","No pudimos acceder a tu ubicaci\xf3n,  si estas en Cd. Delicias enciende tu gps y tu envio sera gratis"),this.location.setCurrentUserLocation("Nacional"),this.serverProcess=!1})}locationAccPermission(){this.locationAccuracy.canRequest().then(e=>{e||this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.enableGPS()},e=>{this.presentAlert("locationAccPermission Error","No pudimos acceder a tu ubicaci\xf3n, si estas en Cd. Delicias enciende tu gps y tu envio sera gratis"),this.location.setCurrentUserLocation("Nacional"),this.serverProcess=!1})})}enableGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{this.currentLocPosition()},e=>{JSON.stringify(e),this.presentAlert("enableGPS Error","No pudimos acceder a tu ubicaci\xf3n, si estas en Cd. Delicias enciende tu gps y tu envio sera gratis"),this.location.setCurrentUserLocation("Nacional"),this.serverProcess=!1})}currentLocPosition(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),this.location.getUserLocation(e.coords.latitude,e.coords.longitude).subscribe(e=>{console.log(e),200==e.statusID?(this.location.setCurrentUserLocation("Delicias"),this.presentAlert("Exito","Tu ubicacion actual en de Cd. Delicias te da servicio a domicilio gratis")):(this.location.setCurrentUserLocation("Nacional"),this.presentAlert("Exito","Tu ubicacion actual fuera de Cd. Delicias no cuenta con la promoci\xf3n de envio gratis")),this.serverProcess=!1})}).catch(e=>{this.presentAlert("currentLocPosition Error",e),this.presentAlert("currentLocPosition Error","No pudimos acceder a tu ubicaci\xf3n, si estas en Cd. Delicias enciende tu gps y tu envio sera gratis"),this.location.setCurrentUserLocation("Nacional"),this.serverProcess=!1})}}return e.\u0275fac=function(n){return new(n||e)(b.Jb(s.C),b.Jb(d.a),b.Jb(s.B),b.Jb(u.a),b.Jb(s.a),b.Jb(r.g),b.Jb(g.a),b.Jb(h.a),b.Jb(p.a),b.Jb(m.a))},e.\u0275cmp=b.Db({type:e,selectors:[["app-tab4"]],decls:6,vars:5,consts:[["class","ion-spinner-section",4,"ngIf"],["mode","ios"],[4,"ngIf"],["class","ion-text-center tab-no-session-message",3,"click",4,"ngIf"],["style","margin:5px;",4,"ngIf"],["style","padding:0px 15px; margin:10px;",4,"ngIf"],[1,"ion-spinner-section"],["color","primary","name","lines"],[1,"grid-container"],["justify-content-around",""],["size","12",1,"ion-text-right"],["name","location-outline",1,"header-location-icon","mr-15",3,"click"],["name","chevron-forward-outline",1,"header-location-icon",3,"click"],[1,"ion-text-center","tab-no-session-message",3,"click"],["size","12",1,"my_profile_no_session"],["src","../assets/svg/login.svg"],[1,"section-p-no-session-message"],[2,"margin","5px"],["size","12",1,"my_profile"],["src","../assets/svg/my_profile.svg"],["justify-content-around","",2,"margin","5px 30px 30px 30px"],[3,"ngModel","ionChange","ngModelChange"],["value","profile"],["value","address"],["justify-content-around","","class","segment-row",4,"ngIf"],["justify-content-around","",1,"segment-row"],["size","12"],["name","person-outline"],[1,"form-label-text"],["placeholder","Nombre (s)","clearInput","",3,"ngModel","ngModelChange"],["name","mail-open-outline"],["placeholder","Email","clearInput","",3,"ngModel","ngModelChange"],["size","6"],["name","lock-closed-outline"],["clearInput","",3,"ngModel","ngModelChange"],["name","call-outline"],["placeholder","Celular","clearInput","",3,"ngModel","ngModelChange"],["name","location-outline"],["placeholder","Calle","clearInput","",3,"ngModel","ngModelChange"],["placeholder","Colonia","clearInput","",3,"ngModel","ngModelChange"],["placeholder","C.P","clearInput","",3,"ngModel","ngModelChange"],["placeholder","Estado","clearInput","",3,"ngModel","ngModelChange"],["placeholder","Ciudad","clearInput","",3,"ngModel","ngModelChange"],["name","card-outline"],["placeholder","No. de la tarjeta","clearInput","",3,"ngModel","ngModelChange"],["placeholder","Mes","clearInput","",3,"ngModel","ngModelChange"],["placeholder","A\xf1o","clearInput","",3,"ngModel","ngModelChange"],["placeholder","Nombre en la tarjeta","clearInput","",3,"ngModel","ngModelChange"],[2,"padding","0px 15px","margin","10px"],["expand","block",3,"disabled","click"]],template:function(e,n){1&e&&(b.hc(0,M,2,0,"section",0),b.Mb(1,"ion-content",1),b.hc(2,C,6,0,"ion-header",2),b.hc(3,f,5,0,"section",3),b.hc(4,y,14,4,"section",4),b.hc(5,x,3,1,"section",5),b.Lb()),2&e&&(b.cc("ngIf",1==n.serverProcess),b.zb(2),b.cc("ngIf",n.user),b.zb(1),b.cc("ngIf",!n.user),b.zb(1),b.cc("ngIf",n.user),b.zb(1),b.cc("ngIf",n.user))},directives:[i.j,s.f,s.u,s.i,s.h,s.q,s.e,s.j,s.r,s.F,t.d,t.g,s.s,s.m,s.k,s.G,s.c],styles:["ion-input[_ngcontent-%COMP%]{font-family:GilroyLight;background-position:left 8px center;height:auto;font-size:1rem;font-weight:400;color:#7f8490;background-color:#fafbfc;border-bottom:1px solid rgba(0,0,0,.12941176470588237);--padding-start:10px!important}.input-label-text[_ngcontent-%COMP%]{font-family:GilroyLight;font-size:.7rem;padding-bottom:0!important}.form-label-text[_ngcontent-%COMP%]{padding-left:8px}ion-col[_ngcontent-%COMP%]{margin-bottom:14px}.tab-no-session-message[_ngcontent-%COMP%]{font-family:GilroyLight;height:auto;font-weight:400;color:var(--ion-color-primary)!important;padding:10px;margin-top:20%}.my_profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin:auto;display:block;border-radius:100%;border:2px solid #8c715c}.my_profile_no_session[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:30%!important;width:50%;margin:auto;display:block}.section-p-no-session-message[_ngcontent-%COMP%]{padding:0 20px}.segment-row[_ngcontent-%COMP%]{margin:20px 10px 10px}ion-header[_ngcontent-%COMP%]{position:absolute;z-index:999;width:100%;position:fixed;padding:5px 8px 0 5px}.header-icons[_ngcontent-%COMP%]{font-size:30px;color:rgba(244,67,54,.7098039215686275)}.header-location-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff;background-color:var(--ion-color-primary-shade);border-radius:100%;padding:5px;box-shadow:0 0 20px #795548}.mr-15[_ngcontent-%COMP%]{margin-right:15px!important}"]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[r.i.forChild(A)],r.i]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[i.b,t.a,s.y,I]]}),e})()}}]);