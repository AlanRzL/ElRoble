{"version":3,"sources":["webpack:///src/app/services/stripe.service.ts","webpack:///src/app/pages/tab3/tab3-routing.module.ts","webpack:///src/app/pages/explore-container/explore-container.module.ts","webpack:///src/app/pipes/dom-sanitizer.pipe.ts","webpack:///src/app/pages/tab3/tab3.page.html","webpack:///src/app/pages/tab3/tab3.module.ts","webpack:///src/app/pages/tab3/tab3.page.ts","webpack:///src/app/pipes/pipes.module.ts","webpack:///src/app/pipes/image-sanitizer.pipe.ts","webpack:///src/app/pages/tab3/tab3.page.scss"],"names":["URL","StripeService","http","orderTotal","get","providedIn","routes","path","component","Tab3PageRoutingModule","imports","forChild","exports","ExploreContainerComponentModule","declarations","DomSanitizerPipe","domSanitizer","imageURL","domImage","bypassSecurityTrustStyle","name","Tab3PageModule","Tab3Page","stripeService","ordersService","authService","sessionService","localToastsController","modalCtrl","alertController","router","location","user","order","serverProcess","currentUserLocationIntents","orderProductsArray","totalProductsOrderPrice","totalShipping","totalOrderPrice","stripeOrderStep","stripe","Stripe","console","log","validateUserSession","setTimeout","getLocalOrder","localUser","getLocalUser","calculateTotalPrice","item","index","indexOf","Qty","Total","Price","splice","presentToast","forEach","product","getCurrentUserLocation","setLocalOrder","presentAlertConfirmPay","openLoginComponent","create","cssClass","header","message","buttons","text","role","handler","blah","Address","AddressCity","AddressColone","AddressState","AddressZipCode","Phone","presentAlert","alert","present","id","modal","onDidDismiss","then","data","onWillDismiss","elements","style","base","color","fontSize","fontFamily","fontSmoothing","invalid","card","mount","addEventListener","event","displayError","document","getElementById","error","textContent","buttonPayNowToStripe","errorElement","preventDefault","createToken","result","parseFloat","toFixed","clientSecret","getToken","subscribe","resp","statusID","payWithCard","statusName","statusDescription","confirmCardPayment","payment_method","billing_details","Name","email","Email","phone","address","line1","city","state","country","paymentIntent","createOrderInDB","StripeID","ID_User","getLocalOrderString","postOrder","localStorage","setItem","openOrderCompletedComponent","selector","template","PipesModule","ImageSanitizerPipe","bypassSecurityTrustUrl"],"mappings":"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","file":"tab3-tab3-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { StrpieClientSecretResponse } from '../interfaces/interfaces';\n\nconst URL = 'https://carniceriaelroble.com/app/controllers';\n@Injectable({\n  providedIn: 'root'\n})\nexport class StripeService {\n\n  constructor(private http: HttpClient) { }\n\n  getToken(orderTotal:number){\n    return this.http.get<StrpieClientSecretResponse>(`${URL}/stripe_token.php?orderTotal=${orderTotal}`);\n   }\n\n\n\n\n\n\n\n  }\n\n\n\n\n  ","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ExploreContainerComponent } from './explore-container.component';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  imports: [ CommonModule, FormsModule, IonicModule, PipesModule],\n  declarations: [ExploreContainerComponent],\n  exports: [ExploreContainerComponent]\n})\nexport class ExploreContainerComponentModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'domSanitizer'\n})\nexport class DomSanitizerPipe implements PipeTransform {\n  constructor(private domSanitizer: DomSanitizer){}\n  transform(imageURL:any): any {\n    let domImage = `url('${imageURL}')`;\n    return this.domSanitizer.bypassSecurityTrustStyle( domImage );\n  }\n\n}\n","export default \"<section *ngIf=\\\"serverProcess == true\\\" class=\\\"ion-spinner-section\\\">\\n    <ion-spinner color=\\\"primary\\\" name=\\\"lines\\\"></ion-spinner>\\n</section>\\n\\n\\n\\n\\n<ion-content mode=\\\"ios\\\">\\n\\n    <!-- <ion-header *ngIf=\\\"stripeOrderStep == 1\\\">\\n        <ion-grid class=\\\"grid-container\\\">\\n            <ion-row justify-content-around>\\n                <ion-col size=\\\"12\\\" class=\\\"ion-text-right \\\">\\n                    <ion-icon name=\\\"location-outline\\\" class=\\\"header-icons\\\" (click)=\\\"presentAlertConfirm()\\\"></ion-icon>\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n    </ion-header>-->\\n\\n\\n    <ion-card *ngIf=\\\"orderProductsArray.length > 0\\\" style=\\\"box-shadow: none !important;\\\">\\n        <!--(click)=\\\"showDetails(work)\\\"-->\\n\\n        <ion-row class=\\\"ion-no-padding\\\">\\n            <ion-col size=\\\"12\\\">\\n                <ion-label>\\n                    <div class=\\\"align\\\">\\n                        <p class=\\\"delivery-address-name\\\" (click)=\\\"openOrderCompletedComponent()\\\"> Productos</p>\\n                    </div>\\n                </ion-label>\\n            </ion-col>\\n        </ion-row>\\n\\n\\n        <ion-list class=\\\"ion-no-padding\\\">\\n\\n            <ion-item class=\\\"ion-no-padding\\\" *ngFor=\\\"let product of orderProductsArray\\\">\\n                <ion-col size=\\\"3\\\" class=\\\"ion-no-margin\\\">\\n                    <img class=\\\"border-radius image-work\\\" [src]=\\\" product.Photo | imageSanitizer\\\">\\n                </ion-col>\\n                <ion-col size=\\\"6\\\" class=\\\"ion-no-margin\\\">\\n                    <ion-grid class=\\\"ion-no-padding ion-no-margin\\\">\\n                        <ion-row>\\n                            <ion-col size=\\\"12\\\" class=\\\"ion-text-left\\\">\\n                                <div class=\\\"align\\\">\\n                                    <p class=\\\"product-name ion-text-nowrap\\\">{{product.Name}}</p>\\n                                    <p class=\\\"card-date ion-text-wrap ion-text-capitalize\\\">{{product.Price | currency : 'USD' : 'symbol' : '2.2-2' }} x {{product.Unit}}</p>\\n                                </div>\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n                    <ion-grid class=\\\"ion-no-padding ion-no-margin\\\">\\n                        <ion-row>\\n                            <ion-col size=\\\"12\\\" class=\\\"ion-text-left\\\">\\n                                <ion-row class=\\\"product-qty-cart\\\">\\n                                    <ion-col size=\\\"12\\\">\\n                                        <ion-button *ngIf=\\\"stripeOrderStep == 1\\\" size=\\\"small\\\" color=\\\"primary\\\" (click)=\\\"remove(product)\\\">\\n                                            <ion-icon name=\\\"remove-outline\\\"></ion-icon>\\n                                        </ion-button>\\n                                        <label class=\\\"single-product-qty\\\">{{product.Qty}}</label>\\n                                        <ion-button *ngIf=\\\"stripeOrderStep == 1\\\" size=\\\"small\\\" color=\\\"primary\\\" (click)=\\\"add(product)\\\">\\n                                            <ion-icon name=\\\"add-outline\\\"></ion-icon>\\n                                        </ion-button>\\n                                    </ion-col>\\n                                </ion-row>\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n                </ion-col>\\n                <ion-col size=\\\"3\\\" class=\\\"ion-text-right ion-no-margin\\\">\\n                    <label class=\\\"single-product-total-price\\\">{{product.Total | currency : 'USD' : 'symbol' : '2.2-2' }}</label>\\n                </ion-col>\\n                <label *ngIf=\\\"stripeOrderStep == 1\\\" class=\\\"delete-product-button\\\" (click)=\\\"delete(product)\\\">x</label>\\n            </ion-item>\\n\\n\\n\\n        </ion-list>\\n\\n\\n    </ion-card>\\n\\n\\n    <ion-col *ngIf=\\\"orderProductsArray.length == 0\\\" size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n        <img src=\\\"../assets/svg/empty_cart.svg\\\" class=\\\"empty-cart-img\\\">\\n        <p class=\\\"primary-color section-p-no-session-message\\\"> ¡Carrito vacio, agrega productos!</p>\\n    </ion-col>\\n\\n\\n\\n</ion-content>\\n\\n\\n<ion-footer no-border color=\\\"light\\\" mode=\\\"ios\\\">\\n\\n    <ion-card *ngIf=\\\"orderProductsArray.length > 0\\\" style=\\\"box-shadow: none !important;\\\">\\n        <ion-list class=\\\"ion-no-padding\\\">\\n            <ion-row class=\\\"ion-no-padding\\\">\\n                <ion-col size=\\\"12\\\">\\n                    <ion-label>\\n                        <div class=\\\"align\\\">\\n                            <p class=\\\"delivery-address-name\\\"> Datos de entrega</p>\\n                        </div>\\n                    </ion-label>\\n                </ion-col>\\n            </ion-row>\\n\\n            <ion-row *ngIf=\\\"!localUser\\\" class=\\\"ion-no-padding ion-text-center\\\" (click)=\\\"openLoginComponent()\\\">\\n                <ion-col size=\\\"12\\\">\\n                    <p>Sin datos para la entrega, inicia sesion</p>\\n                </ion-col>\\n            </ion-row>\\n\\n            <ion-row *ngIf=\\\"localUser\\\" class=\\\"ion-no-padding\\\">\\n                <ion-col size=\\\"6\\\">\\n                    <ion-label>\\n                        <p class=\\\"delivery-address-text ion-text-wrap ion-text-capitalize\\\">{{user.Name}}</p>\\n                        <p class=\\\"delivery-address-text  ion-text-wrap ion-text-capitalize\\\">{{user.Phone}}</p>\\n                    </ion-label>\\n                </ion-col>\\n                <ion-col size=\\\"6\\\">\\n                    <ion-label>\\n                        <p class=\\\"delivery-address-text ion-text-wrap ion-text-capitalize\\\">{{user.Address}}</p>\\n                        <p class=\\\"delivery-address-text  ion-text-wrap ion-text-capitalize\\\">Col. {{user.AddressColone}} c.p {{user.AddressZipCode}}</p>\\n                        <p class=\\\"delivery-address-text  ion-text-wrap ion-text-capitalize\\\">{{user.AddressCity}} {{user.AddressState}}</p>\\n                    </ion-label>\\n                </ion-col>\\n            </ion-row>\\n\\n\\n        </ion-list>\\n    </ion-card>\\n\\n\\n\\n\\n    <ion-card id=\\\"payment-card\\\" *ngIf=\\\"stripeOrderStep == 2\\\">\\n        <ion-list class=\\\"ion-no-padding\\\">\\n            <ion-row class=\\\"ion-no-padding\\\">\\n                <ion-col size=\\\"12\\\">\\n                    <ion-label>\\n                        <div class=\\\"align\\\">\\n                            <p class=\\\"delivery-address-name\\\"> Tarjeta</p>\\n                        </div>\\n                    </ion-label>\\n                </ion-col>\\n            </ion-row>\\n\\n            <ion-row class=\\\"ion-no-padding ion-text-center\\\" style=\\\"\\n            margin-top: 15px;\\n            margin-bottom: 10px;\\\">\\n                <ion-col size=\\\"12\\\">\\n\\n                    <form action=\\\"/\\\" method=\\\"post\\\" id=\\\"payment-form\\\">\\n                        <div class=\\\"form-row\\\">\\n                            <div id=\\\"card-element\\\">\\n                            </div>\\n                            <div id=\\\"card-errors\\\" role=\\\"alert\\\"></div>\\n                        </div>\\n                    </form>\\n                </ion-col>\\n            </ion-row>\\n        </ion-list>\\n    </ion-card>\\n\\n\\n\\n\\n    <ion-grid class=\\\"ion-no-padding ion-no-margin\\\">\\n        <div class=\\\"pay-total-amount-card\\\">\\n            <ion-row>\\n                <ion-col class=\\\"ion-text-center\\\">\\n                    <ion-row class=\\\"product-qty-cart\\\">\\n                        <ion-col>\\n                            <h5 *ngIf=\\\"totalShipping == 0 && totalProductsOrderPrice > 0\\\" style=\\\"margin-top: 8px; font-size: 12px;\\\">Envio: Gratis</h5>\\n                            <h5 *ngIf=\\\"totalShipping > 0 \\\" style=\\\"margin-top: 8px; font-size: 12px;\\\">Envio: {{totalShipping | currency : 'USD' : 'symbol' : '2.2-2' }}</h5>\\n                            <h5 *ngIf=\\\"totalProductsOrderPrice > 0\\\" style=\\\"margin-top: 8px; font-size: 12px;\\\">Productos: {{totalProductsOrderPrice | currency : 'USD' : 'symbol' : '2.2-2' }}</h5>\\n                            <h5 style=\\\"margin-top: 8px;\\\">Total:</h5>\\n                            <h1 style=\\\"margin-bottom: 0px;\\\">{{totalProductsOrderPrice + totalShipping | currency : 'USD' : 'symbol' : '2.2-2' }}</h1>\\n                        </ion-col>\\n                    </ion-row>\\n                </ion-col>\\n            </ion-row>\\n            <ion-row>\\n                <ion-col>\\n                    <ion-button *ngIf=\\\"stripeOrderStep == 1\\\" class=\\\"pay-button\\\" [disabled]=\\\"totalProductsOrderPrice <= 0\\\" (click)=\\\"goToPay()\\\">Generar orden</ion-button>\\n                    <ion-button *ngIf=\\\"stripeOrderStep == 2\\\" class=\\\"pay-button\\\" id=\\\"payNowToStripe\\\">Pagar</ion-button>\\n                </ion-col>\\n            </ion-row>\\n        </div>\\n\\n    </ion-grid>\\n</ion-footer>\";","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab3Page } from './tab3.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab3PageRoutingModule } from './tab3-routing.module';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\n    Tab3PageRoutingModule,\n    PipesModule\n  ],\n  declarations: [Tab3Page]\n})\nexport class Tab3PageModule {}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController, ModalController } from '@ionic/angular';\nimport { LoginComponent } from 'src/app/components/login/login.component';\nimport { LocalOrder, OrderModel, UserModel } from 'src/app/interfaces/interfaces';\nimport { LocalToastsService } from 'src/app/services/local-toasts.service';\nimport { OrdersService } from 'src/app/services/orders.service';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { SessionService } from 'src/app/services/session.service';\nimport { StripeService } from 'src/app/services/stripe.service';\nimport { OrderCompletedComponent } from 'src/app/components/checkout/order-completed.component';\nimport { LocationService } from 'src/app/services/location.service';\n\ndeclare var Stripe;\n\n\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: 'tab3.page.html',\n  styleUrls: ['tab3.page.scss']\n})\nexport class Tab3Page {\n  localUser:any;\n  user = new UserModel();\n  order = new OrderModel();\n  serverProcess: boolean = false;\n  currentUserLocationIntents:number = 0;\n  orderProductsArray:any = [];\n  totalProductsOrderPrice = 0;\n  totalShipping = 0;\n  totalOrderPrice = 0;\n\n  /**Stripe */\n  stripeOrderStep = 1;\n  stripe = Stripe('pk_test_51H78EyJsj5b49qDk7Z6zTjTl4Vso5bMAves3g6vgbMmskLvgqmmmGJ2YVP2UGb9dp42c4Oklj5wk9gK7sDcPdWWG00Sc4BVcPC');\n  card: any; \n  elements: any;\n  /**Stripe */\n\n\n \n\n\n  constructor(\n    private stripeService: StripeService,\n    private ordersService: OrdersService,\n    private authService:AuthService,\n    private sessionService: SessionService,\n    private localToastsController: LocalToastsService, \n    private modalCtrl: ModalController,\n    private alertController: AlertController,\n    private router:Router,\n    private location:LocationService,) {\n\n\n\n    }\n\n  ionViewWillEnter(){\n    this.stripeOrderStep = 1;\n    console.log(\"ionViewWillEnter\");\n    this.validateUserSession();\n  }\n\n\n  validateUserSession(){\n    this.serverProcess = true;\n    setTimeout(()=>{  \n      this.orderProductsArray = this.ordersService.getLocalOrder();\n      this.localUser = this.sessionService.getLocalUser()\n      if(this.localUser){\n        this.user = this.sessionService.getLocalUser();\n      }\n      this.calculateTotalPrice();\n      this.serverProcess = false;\n    }, 500);\n  }\n\n\n\n\n\n\n  remove(item){\n    let index = this.orderProductsArray.indexOf(item);\n    if(item.Qty > 1){\n      item.Qty = item.Qty - 1;\n      item.Total = item.Qty * item.Price;\n      this.orderProductsArray[index] = item;\n      this.calculateTotalPrice();\n    }\n  }\n\n  add(item){\n    let index = this.orderProductsArray.indexOf(item);\n    item.Qty = item.Qty + 1;\n    item.Total = item.Qty * item.Price;\n    this.orderProductsArray[index] = item;\n    this.calculateTotalPrice();\n  }\n\n  delete(item){\n    let index = this.orderProductsArray.indexOf(item);\n    this.orderProductsArray.splice(index, 1);\n    this.calculateTotalPrice();\n    this.localToastsController.presentToast(\"Producto eliminado\");\n  }\n\n\n\n  calculateTotalPrice() {\n    this.totalProductsOrderPrice = 0;\n    this.orderProductsArray.forEach( (product, index) => {\n      this.totalProductsOrderPrice = this.totalProductsOrderPrice + product.Total\n    });\n\n    if(this.location.getCurrentUserLocation() == \"Delicias\"){\n      console.log(this.location.getCurrentUserLocation(), \"0 de envio\");\n      this.totalShipping = 0;\n    }else{\n      console.log(this.location.getCurrentUserLocation(), \"+500 de envio\")\n      if(this.totalProductsOrderPrice > 0){\n        this.totalShipping = 500;\n      }else{\n        this.totalShipping = 0;\n      }\n    }\n    \n    this.totalOrderPrice = this.totalProductsOrderPrice + this.totalShipping;\n    this.ordersService.setLocalOrder(this.orderProductsArray);\n\n\n    setTimeout(()=>{  \n      this.serverProcess = false;\n    }, 500);\n}\n\n\n\n\n\n\n\n\n  goToPay(){\n      if(this.localUser){\n        this.presentAlertConfirmPay();\n      }else{\n        this.openLoginComponent();\n      }\n  }\n\n\n\n\nasync presentAlertConfirmPay() {\n  const alert = await this.alertController.create({\n    cssClass: 'my-custom-class',\n    header: 'Generar orden',\n    message: 'Es necesario contar con tarjeta de debito o credito, ¿desea continuar?',\n    buttons: [\n      {\n        text: 'Cancelar',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: (blah) => {\n          console.log('Confirm Cancel: blah');\n        }\n      }, {\n        text: 'Si',\n        handler: () => {\n\n          if(!this.user.Address || !this.user.AddressCity || !this.user.AddressColone || !this.user.AddressState || !this.user.AddressZipCode || !this.user.Phone)\n          {\n            this.presentAlert(\"Error\",\"Faltan datos de completar en su perfil / dirección, no es posible completar esta orden.\");\n          }else{\n            console.log(this.user);\n          }\n\n\n\n\n\n\n\n\n          //this.setupStripe();\n        }\n      }\n    ]\n  });\n\n  await alert.present();\n}\n\n\n  async openLoginComponent(){\n    const modal = await this.modalCtrl.create({\n      component: LoginComponent,\n      id:\"LoginComponent\" \n    });\n\n\n  \n    modal.onDidDismiss().then((data) => {\n      console.log(data);\n      if(data.data == \"refresh\"){\n        this.validateUserSession();\n      }\n    });\n\n    modal.present();  \n    const data  = await modal.onWillDismiss();\n    /*if(data.data != \"null\"){\n      this.checkSession();\n    }*/\n  } \n\n\n\n\n  async presentAlert(header, message) {\n    const alert = await this.alertController.create({\n      header: header,\n      message: message,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n\n    const { role } = await alert.onDidDismiss();\n    console.log('onDidDismiss resolved with role', role);\n  }\n\n\n\n\n  async openOrderCompletedComponent(){\n    const modal = await this.modalCtrl.create({\n      component: OrderCompletedComponent,\n      id:\"OrderCompletedComponent\" \n    });\n\n    modal.present();  \n  } \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  setupStripe(){\n    console.log(\"setupStripe\");\n    this.serverProcess = true;\n    this.stripeOrderStep = 2;\n\n    setTimeout(()=>{  \n            this.serverProcess = false;\n\n    \n            /** Original STRIPE  */\n            this.elements = this.stripe.elements();\n            var style = {\n              base: {\n                color: '#303238',\n                fontSize: '16px',\n                fontFamily: '\"Open Sans\", sans-serif',\n                fontSmoothing: 'antialiased',\n                '::placeholder': {\n                  color: '#CFD7DF',\n                },\n              },\n              invalid: {\n                color: '#e5424d',\n                ':focus': {\n                  color: '#303238',\n                },\n              },\n            };\n\n\n\n            this.card = this.elements.create('card', { style: style });\n\n            this.card.mount(\"#card-element\");\n\n            this.card.addEventListener('change', event => {\n              var displayError = document.getElementById('card-errors');\n              if (event.error) {\n                displayError.textContent = event.error.message;\n              } else {\n                displayError.textContent = '';\n              }\n            });\n\n            var buttonPayNowToStripe = document.getElementById('payNowToStripe');\n            buttonPayNowToStripe.addEventListener('click', event => {\n              var errorElement = document.getElementById('card-errors');\n              errorElement.textContent = \"\";\n              event.preventDefault();\n              this.serverProcess = true;\n              // this.stripe.createToken(this.card)\n              this.stripe.createToken(this.card).then(result => {\n                \n                if (result.error) {\n                  var errorElement = document.getElementById('card-errors');\n                  errorElement.textContent = result.error.message;\n                  this.serverProcess = false;\n                } else {\n\n\n\n                    this.totalOrderPrice = this.totalProductsOrderPrice + this.totalShipping;\n                    this.totalOrderPrice = parseFloat(this.totalOrderPrice.toFixed(2));\n\n                    try{\n                          this.serverProcess = true;\n                          var clientSecret = this.stripeService.getToken(this.totalOrderPrice).subscribe( resp =>{\n                            console.log(resp);\n                            setTimeout(()=>{  \n                              this.serverProcess = false;\n                              if(resp.statusID == 200){\n                                this.payWithCard(this.stripe, this.card, resp.clientSecret);\n                              }else{\n                                this.presentAlert(resp.statusName,resp.statusDescription);\n                              }\n                            }, 1500);\n                          });\n\n                    }catch(error) {\n                      this.serverProcess = false;\n                      this.presentAlert(\"Error\",error);\n                    }\n\n\n\n\n                  console.log(result);\n                }\n              });\n            });\n\n  }, 1000);//setTimeout(()=>{ \n\n\n\n\n\n  }\n\n\n\n  async payWithCard(stripe, card, clientSecret){\n    try {\n\n      \n    this.serverProcess = true;\n    this.stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: card,\n        billing_details: {\n         name: this.user.Name,\n         email: this.user.Email,\n         phone: this.user.Phone,\n         address: {\n            line1: this.user.Address + this.user.AddressColone + this.user.AddressZipCode,\n            city: this.user.AddressCity,\n            state: this.user.AddressState,\n            country: 'MX' \n          },\n        },\n      }\n    }).then(result => {\n      this.serverProcess = false;\n      if (result.error) {\n        var errorElement = document.getElementById('card-errors');\n        errorElement.textContent = result.error.message;\n        // Show error to your customer\n        //showError(result.error.message);\n      } else {\n        // The payment succeeded!\n        console.log(result.paymentIntent.id);\n        this.createOrderInDB(result.paymentIntent.id);\n      }\n\n    })\n\n   }catch(error) {\n    this.serverProcess = false;\n    this.presentAlert(\"Error\",error);\n   }\n\n\n\n\n}\n\n\ncreateOrderInDB(StripeID:string){\n  this.serverProcess = true;\n\n  this.order.ID_User = this.user.ID_User;\n  this.order.Name = this.user.Name;\n  this.order.Phone = this.user.Phone;\n  this.order.Email = this.user.Email;\n  this.order.Address = this.user.Address;\n  this.order.AddressColone = this.user.AddressColone;\n  this.order.AddressZipCode = this.user.AddressZipCode;\n  this.order.AddressState = this.user.AddressState;\n  this.order.AddressCity = this.user.AddressCity;\n  this.order.orderProductsArray = this.ordersService.getLocalOrderString();\n  this.order.StripeID = StripeID;\n\n  this.ordersService.postOrder(this.order).subscribe( resp =>{\n    console.log(resp);\n    setTimeout(()=>{  \n      this.serverProcess = false;\n      if(resp.statusID == 200){\n        localStorage.setItem('LocalOrder', \"[]\");\n        this.validateUserSession();\n        this.openOrderCompletedComponent();\n      }else{\n        this.presentAlert(resp.statusName,resp.statusDescription);\n      }\n    }, 1500);\n  });\n\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DomSanitizerPipe } from './dom-sanitizer.pipe';\nimport { ImageSanitizerPipe } from './image-sanitizer.pipe';\n\n\n\n@NgModule({\n  declarations: [DomSanitizerPipe, ImageSanitizerPipe],\n  exports:[DomSanitizerPipe, ImageSanitizerPipe]\n})\nexport class PipesModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n\n@Pipe({\n  name: 'imageSanitizer'\n})\nexport class ImageSanitizerPipe implements PipeTransform {\n  constructor(private domSanitizer: DomSanitizer){}\n  transform(imageURL:any): any {\n    return this.domSanitizer.bypassSecurityTrustUrl(imageURL);\n  }\n\n\n}","export default \".card-date {\\n  font-size: 0.63rem !important;\\n  line-height: 11pt;\\n  font-weight: bold;\\n  font-style: italic;\\n  margin-top: -4px;\\n}\\n\\nion-avatar img {\\n  border-radius: 5%;\\n}\\n\\n.image-work {\\n  border-radius: 5%;\\n  width: 75px;\\n  height: 75px;\\n  /* Full height */\\n  /* Imagen centrada y colocada de forma elegante */\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n}\\n\\n.aligname {\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n\\n.aligname {\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n\\nion-card {\\n  margin: 10px 10px 0px 10px;\\n  padding: 5px;\\n}\\n\\n.delivery-address-name {\\n  margin-bottom: 10px;\\n  font-family: Acumin !important;\\n  font-size: 22px;\\n  color: var(--ion-color-primary);\\n}\\n\\n.delivery-addres-icon {\\n  font-size: 40px;\\n}\\n\\n.delivery-address-text {\\n  font-size: 12px;\\n  line-height: 11pt;\\n  font-weight: bold;\\n  font-style: italic;\\n  color: var(--ion-color-primary) !important;\\n}\\n\\nion-footer {\\n  background-color: #f4f5f8 !important;\\n}\\n\\nion-footer ion-grid {\\n  background-color: #f4f5f8 !important;\\n}\\n\\nion-footer h1 {\\n  margin-top: 5px;\\n}\\n\\nion-footer h5 {\\n  margin-bottom: 0px;\\n}\\n\\n.pay-total-amount-card {\\n  margin: 10px;\\n  background-color: white;\\n  border-radius: 8px;\\n}\\n\\n.pay-button {\\n  --border-radius: 0px 0px 8px 8px;\\n  width: 100%;\\n}\\n\\n.product-name {\\n  margin: 0px;\\n  font-size: 15px;\\n}\\n\\n.single-product-total-price {\\n  font-size: 15px;\\n}\\n\\n.single-product-qty {\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n\\n.delete-product-button {\\n  position: absolute;\\n  top: 0px;\\n  right: 10px;\\n  color: gray;\\n}\\n\\n#card-errors {\\n  color: red;\\n  margin-top: 18px;\\n}\\n\\n#payment-card {\\n  box-shadow: none !important;\\n  border: 2px solid red;\\n}\\n\\n#payment-card:hover {\\n  box-shadow: none !important;\\n  border: none !important;\\n}\\n\\n.empty-cart-img {\\n  width: 50%;\\n  margin: auto;\\n  display: block;\\n  margin-top: 30%;\\n}\\n\\n.section-p-no-session-message {\\n  padding: 0px 20px 0px 20px !important;\\n}\\n\\nion-header {\\n  position: absolute;\\n  z-index: 999;\\n  width: 100%;\\n  position: fixed;\\n}\\n\\n.header-icons {\\n  /*font-size: 30px;\\n  color: #f44336b5;    */\\n  font-size: 30px;\\n  color: #ffffff;\\n  background-color: var(--ion-color-primary-shade);\\n  border-radius: 100%;\\n  padding: 5px;\\n  margin-top: -5px;\\n  box-shadow: #795548 0px 0px 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3RhYjMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksNkJBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtBQUNKOztBQUVBO0VBQ0ksaUJBQUE7QUFDSjs7QUFFQTtFQUNJLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFFQSxnQkFBQTtFQUVBLGlEQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0FBREo7O0FBSUE7RUFDSSxxQkFBQTtFQUNBLG1CQUFBO0FBREo7O0FBSUE7RUFDSSxxQkFBQTtFQUNBLG1CQUFBO0FBREo7O0FBSUE7RUFDSSwwQkFBQTtFQUNBLFlBQUE7QUFESjs7QUFJQTtFQUNJLG1CQUFBO0VBQ0EsOEJBQUE7RUFDQSxlQUFBO0VBQ0EsK0JBQUE7QUFESjs7QUFJQTtFQUNJLGVBQUE7QUFESjs7QUFJQTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSwwQ0FBQTtBQURKOztBQVVBO0VBQ0ksb0NBQUE7QUFQSjs7QUFRSTtFQUNJLG9DQUFBO0FBTlI7O0FBUUk7RUFDSSxlQUFBO0FBTlI7O0FBUUk7RUFDSSxrQkFBQTtBQU5SOztBQVVBO0VBQ0ksWUFBQTtFQUNBLHVCQUFBO0VBQ0Esa0JBQUE7QUFQSjs7QUFVQTtFQUNJLGdDQUFBO0VBQ0EsV0FBQTtBQVBKOztBQVVBO0VBQ0ksV0FBQTtFQUNBLGVBQUE7QUFQSjs7QUFVQTtFQUNJLGVBQUE7QUFQSjs7QUFVQTtFQUNJLGtCQUFBO0VBQ0EsbUJBQUE7QUFQSjs7QUFVQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0FBUEo7O0FBVUE7RUFDSSxVQUFBO0VBQ0EsZ0JBQUE7QUFQSjs7QUFVQTtFQUNJLDJCQUFBO0VBQ0EscUJBQUE7QUFQSjs7QUFVQTtFQUNJLDJCQUFBO0VBQ0EsdUJBQUE7QUFQSjs7QUFVQTtFQUNJLFVBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7QUFQSjs7QUFVQTtFQUNJLHFDQUFBO0FBUEo7O0FBVUE7RUFFSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQVJKOztBQVlBO0VBQ0k7d0JBQUE7RUFFQSxlQUFBO0VBQ0EsY0FBQTtFQUNBLGdEQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQ0FBQTtBQVRKIiwiZmlsZSI6InRhYjMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNhcmQtZGF0ZSB7XG4gICAgZm9udC1zaXplOiAwLjYzcmVtICFpbXBvcnRhbnQ7XG4gICAgbGluZS1oZWlnaHQ6IDExcHQ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIG1hcmdpbi10b3A6IC00cHg7XG59XG5cbmlvbi1hdmF0YXIgaW1nIHtcbiAgICBib3JkZXItcmFkaXVzOiA1JTtcbn1cblxuLmltYWdlLXdvcmsge1xuICAgIGJvcmRlci1yYWRpdXM6IDUlO1xuICAgIHdpZHRoOiA3NXB4O1xuICAgIGhlaWdodDogNzVweDtcbiAgICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG4gICAgLyogRnVsbCBoZWlnaHQgKi9cbiAgICAvLyBoZWlnaHQ6IDEwMCU7IFxuICAgIC8qIEltYWdlbiBjZW50cmFkYSB5IGNvbG9jYWRhIGRlIGZvcm1hIGVsZWdhbnRlICovXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn1cblxuLmFsaWduYW1lIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmFsaWduYW1lIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuaW9uLWNhcmQge1xuICAgIG1hcmdpbjogMTBweCAxMHB4IDBweCAxMHB4O1xuICAgIHBhZGRpbmc6IDVweDtcbn1cblxuLmRlbGl2ZXJ5LWFkZHJlc3MtbmFtZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICBmb250LWZhbWlseTogQWN1bWluICFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG59XG5cbi5kZWxpdmVyeS1hZGRyZXMtaWNvbiB7XG4gICAgZm9udC1zaXplOiA0MHB4O1xufVxuXG4uZGVsaXZlcnktYWRkcmVzcy10ZXh0IHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgbGluZS1oZWlnaHQ6IDExcHQ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSkgIWltcG9ydGFudDtcbn1cblxuaW9uLWxpc3Qge1xuICAgIGlvbi1pdGVtIHtcbiAgICAgICAgLy8gbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICB9XG59XG5cbmlvbi1mb290ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY1ZjggIWltcG9ydGFudDtcbiAgICBpb24tZ3JpZCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY1ZjggIWltcG9ydGFudDtcbiAgICB9XG4gICAgaDEge1xuICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgfVxuICAgIGg1IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICAgIH1cbn1cblxuLnBheS10b3RhbC1hbW91bnQtY2FyZCB7XG4gICAgbWFyZ2luOiAxMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbn1cblxuLnBheS1idXR0b24ge1xuICAgIC0tYm9yZGVyLXJhZGl1czogMHB4IDBweCA4cHggOHB4O1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4ucHJvZHVjdC1uYW1lIHtcbiAgICBtYXJnaW46IDBweDtcbiAgICBmb250LXNpemU6IDE1cHg7XG59XG5cbi5zaW5nbGUtcHJvZHVjdC10b3RhbC1wcmljZSB7XG4gICAgZm9udC1zaXplOiAxNXB4O1xufVxuXG4uc2luZ2xlLXByb2R1Y3QtcXR5IHtcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMTBweDtcbn1cblxuLmRlbGV0ZS1wcm9kdWN0LWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMHB4O1xuICAgIHJpZ2h0OiAxMHB4O1xuICAgIGNvbG9yOiBncmF5O1xufVxuXG4jY2FyZC1lcnJvcnMge1xuICAgIGNvbG9yOiByZWQ7XG4gICAgbWFyZ2luLXRvcDogMThweDtcbn1cblxuI3BheW1lbnQtY2FyZCB7XG4gICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJlZDtcbn1cblxuI3BheW1lbnQtY2FyZDpob3ZlciB7XG4gICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xufVxuXG4uZW1wdHktY2FydC1pbWcge1xuICAgIHdpZHRoOiA1MCU7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbi10b3A6IDMwJTtcbn1cblxuLnNlY3Rpb24tcC1uby1zZXNzaW9uLW1lc3NhZ2Uge1xuICAgIHBhZGRpbmc6IDBweCAyMHB4IDBweCAyMHB4ICFpbXBvcnRhbnQ7XG59XG5cbmlvbi1oZWFkZXIge1xuICAgIC8vcGFkZGluZzogMHB4IDBweCAwcHggMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIC8vcGFkZGluZzogNXB4IDhweCAwcHggNXB4O1xufVxuXG4uaGVhZGVyLWljb25zIHtcbiAgICAvKmZvbnQtc2l6ZTogMzBweDtcbiAgICBjb2xvcjogI2Y0NDMzNmI1OyAgICAqL1xuICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1zaGFkZSk7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgICBwYWRkaW5nOiA1cHg7XG4gICAgbWFyZ2luLXRvcDogLTVweDtcbiAgICBib3gtc2hhZG93OiAjNzk1NTQ4IDBweCAwcHggMjBweDtcbn0iXX0= */\";"]}